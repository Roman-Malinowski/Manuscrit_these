%========================= Classe du Document ==========================
\documentclass[a4paper,fleqn,12pt,openright]{report}
%============================= Packages ================================
\usepackage[T1]{fontenc}
\usepackage[hidelinks]{hyperref} % Cick on citations
\usepackage[utf8]{inputenc}
\usepackage[skip=10pt, indent=20pt]{parskip}  % Paragraph spacing
\usepackage{setspace} % Line spacing
\usepackage[hypcap=false]{caption} % When using hypcap=false, hyperref will link to the caption and not the float environment. This is because using \captionof outside a float env, it generates warnings
\usepackage{subcaption} % Subcaptions for multiple figures 
\usepackage{multicol}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{dsfont} % For characteristic function (\mathds{1}, similar to mathbb 1 but)

\usepackage{comment}  % For commenting big chuncks of text

\usepackage[margin=2.5cm]{geometry}
\usepackage{graphicx}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usepackage{tikz}

\usepackage{xcolor}
\usepackage{xspace}
\usepackage{colortbl} % For 
\usepackage{xr}  % For crossreferencing between chapters

\usepackage[tikz]{mdframed}  % For putting boxes around theorem, examples, definitions etc

\usepackage[acronym, toc]{glossaries}
\usepackage{breakcites} % Citations over multiple lines
%\setlength{\parindent}{0pt}  % Paragraph indentation 

\usepackage[margin,index]{fixme}

%Import the natbib package and sets a bibliography  and citation styles
\bibliographystyle{apalike}

%=============================== Commands ===================================

\newcommand{\todoroman}[1]{{\color{purple}TODO: \textit{#1}}}

\newcommand{\comseb}[1]{{\color{red}\footnote{\color{red}Seb: \textit{#1}}}}
\newcommand{\comroman}[1]{{\color{purple}\footnote{\color{purple}Roman: \textit{#1}}}}
\newcommand{\commanu}[1]{{\color{green}\footnote{\color{green}Manu: \textit{#1}}}}
\newcommand{\commanue}[1]{{\color{blue}\footnote{\color{blue}Manue: \textit{#1}}}}
\newcommand{\comloic}[1]{{\color{orange}\footnote{\color{orange}Loïc: \textit{#1}}}}

\newcommand{\M}{{\mathfrak{M}}}
\newcommand{\X}{{\mathcal{X}}}
\newcommand{\low}{{\underline{P}}}
\newcommand{\tdt}{{\times\dots\times}}
\newcommand{\opi}{{[\![}}
\newcommand{\cli}{{]\!]}}



%\newtheorem{theorem}{Theorem}[section]
%\theoremstyle{definition}
%\newtheorem{example}{Example}[section]
%\newtheorem{proposition}{Proposition}[section]
%\newtheorem{definition}{Definition}[section]
%\newtheorem{remark}{Remark}[section]

\mdfsetup{skipabove=\topskip, skipbelow=\topskip}  % Define Skips between the frames and text above and bellow

%% Code taken almost directly from https://ctan.mines-albi.fr/macros/latex/contrib/mdframed/mdframed-example-default.pdf
%% Theorem environment
\newcounter{theor}[chapter]
\renewcommand{\thetheor}{\arabic{theor}}
\newenvironment{theorem}[1][]{%
 \refstepcounter{theor}%
  \ifstrempty{#1}%
  {\mdfsetup{%
    frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=blue!30!white]
        {\strut Theorem~\thetheor};}}
  }%
  {\mdfsetup{%
     frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=blue!30!white]
        {\strut Theorem~\thetheor:~#1};}}%
   }%
   \mdfsetup{innertopmargin=10pt,linecolor=blue!70!black,%
             linewidth=2pt,topline=true,
             frametitleaboveskip=\dimexpr-\ht\strutbox\relax,
             backgroundcolor=blue!10!white,%
             roundcorner=10pt,}
   \begin{mdframed}[]\relax%
   }{\end{mdframed}}
 
%% Definition environment
\newcounter{theo}[section]
\newenvironment{definition}[1][]{%
 \stepcounter{theo}%
  \ifstrempty{#1}%
  {\mdfsetup{%
    frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=blue!20]
        {\strut Definition~\thesection.\arabic{theo}};}}
  }%
  {\mdfsetup{%
     frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=blue!20]
        {\strut Definition~\thesection.\arabic{theo}:~#1};}}%
   }%
   \mdfsetup{innertopmargin=10pt,linecolor=blue!20,%
             linewidth=2pt,topline=true,%
             frametitleaboveskip=\dimexpr-\ht\strutbox\relax,%
             backgroundcolor=blue!1!white,%
             roundcorner=5pt,}
   \begin{mdframed}[]\relax%
   }{\end{mdframed}}

%% Proposition environment
\newmdtheoremenv[outerlinewidth=1,%
                 roundcorner=10pt,%
                 backgroundcolor=gray!5!white,%
                 outerlinecolor=black,%
                 innertopmargin=\topskip,%
                 splittopskip=\topskip,%
                ]{proposition}{Proposition}[section]
%% Example Environment
\theoremstyle{definition}  % Boldface title, Roman body
\newmdtheoremenv[roundcorner=5pt, font=\bfseries]{example}{Example}[section]
% Remark Environment
\newenvironment{remark}{%
   \mdfsetup{hidealllines=true,%
             leftline=true,%
             linecolor=gray,%
             middlelinewidth=.2em,%
            }
   \begin{mdframed}[]\textbf{Remark:}\relax%
   }
   {\end{mdframed}}
% Redefines the proof environment
\renewenvironment{proof}{%
   \mdfsetup{hidealllines=true,%
             leftline=true,%
             linecolor=gray!50,%
             middlelinewidth=.2em,%
            }
   \begin{mdframed}[]\textit{\textbf{Proof:}}\relax%
   }
   {\qed\end{mdframed}}
% From CVPR cvpr.sty
\makeatletter
\DeclareRobustCommand\onedot{\futurelet\@let@token\@onedot}
\def\@onedot{\ifx\@let@token.\else.\null\fi\xspace}

\def\eg{\emph{e.g}\onedot} \def\Eg{\emph{E.g}\onedot}
\def\ie{\emph{i.e}\onedot} \def\Ie{\emph{I.e}\onedot}
\def\cf{\emph{cf}\onedot} \def\Cf{\emph{Cf}\onedot}
\def\etc{\emph{etc}\onedot} \def\vs{\emph{vs}\onedot}
\def\st{\emph{s.t}\onedot}
\def\wrt{w.r.t\onedot} \def\dof{d.o.f\onedot}
\def\iid{i.i.d\onedot} \def\wolog{w.l.o.g\onedot}
\def\etal{\emph{et al}\onedot}

\makeatother

%========================= Glossary ====================================

\input{Misc/acronyms_glossary}

\pdfstringdefDisableCommands{%
  \def\glspl#1{<#1>}} % To silence hyperref Warning Token not allowed in a PDF string (Unicode)
%=======================================================================
%=======================================================================

\begin{document}

\definecolor{color}{HTML}{F5F5F5}
%======================= Page de Garde =================================
\thispagestyle{empty}
\include{Misc/title_page}

%==================== Glossaire, TOC etc ===============================
\tableofcontents
\thispagestyle{empty}
\pagebreak
\glsaddall
\pagenumbering{Alph}  % Switch Numerotation of pages to uppercase letters
\setcounter{page}{0}  % Resetting the page number
\printglossary[type=\acronymtype,nonumberlist]
\printglossary[nonumberlist]
\pagebreak

%========================== Les choses sérieuses commencent ===========

\pagenumbering{arabic}  % Switch numerotation of pages to Arabic
%\doublespacing
\onehalfspace

\input{Chapters/0_intro}

\input{Chapters/1_intro_to_stereo}

\input{Chapters/2_mathematical_representation_of_uncertainty}

\input{Chapters/3_propragating_the_uncertainty_to_stereo_images}

\input{Chapters/4_epistemic_uncertainty_in_stereo_matching}

\input{Chapters/5_results}

\input{Chapters/Conclusion}

\singlespace
\bibliography{thesis}

\end{document}
