%========================= Classe du Document ==========================
\documentclass[a4paper,fleqn,12pt,openright]{report}
%============================= Packages ================================

\usepackage[french,english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{ae,lmodern} % Vectorial font
\usepackage[T1]{fontenc}  % Zotero must export bib.tex in Western instead of UTF to avoid problem for \THORN characters

\usepackage[hidelinks]{hyperref} % Cick on citations
\usepackage[skip=10pt, indent=20pt]{parskip}  % Paragraph spacing
\usepackage{setspace} % Line spacing
\usepackage[hypcap=false]{caption} % When using hypcap=false, hyperref will link to the caption and not the float environment. This is because using \captionof outside a float env, it generates warnings
\usepackage{subcaption} % Subcaptions for multiple figures 
\usepackage{multicol}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{dsfont} % For characteristic function (\mathds{1}, similar to mathbb 1 but)
\usepackage{textcomp,gensymb} % For the /degree symbol

\usepackage{comment}  % For commenting big chuncks of text

\usepackage[margin=2.5cm]{geometry}
\usepackage{graphicx}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usepackage{tikz}

\usepackage{xcolor}
\usepackage{xspace}
\usepackage{colortbl} % For 
\usepackage{xr}  % For crossreferencing between chapters

\usepackage[tikz]{mdframed}  % For putting boxes around theorem, examples, definitions etc

\usepackage[acronym, toc]{glossaries}
\usepackage{breakcites} % Citations over multiple lines
%\setlength{\parindent}{0pt}  % Paragraph indentation 

\usepackage[margin,index]{fixme}

%Import the natbib package and sets a bibliography  and citation styles
\bibliographystyle{apalike}

%=============================== Commands ===================================

\newcommand{\todoroman}[1]{{\color{purple}TODO: #1}}

\newcommand{\comseb}[1]{{\color{red}\footnote{\color{red}Seb: \textit{#1}}}}
\newcommand{\comroman}[1]{{\color{purple}\footnote{\color{purple}Roman: \textit{#1}}}}
\newcommand{\commanu}[1]{{\color{green}\footnote{\color{green}Manu: \textit{#1}}}}
\newcommand{\commanue}[1]{{\color{blue}\footnote{\color{blue}Manue: \textit{#1}}}}
\newcommand{\comloic}[1]{{\color{orange}\footnote{\color{orange}Loïc: \textit{#1}}}}

% We use colors in equations to help readability.
% Un-comment next lines if you want just black text.
%\let\oldtextcolor\textcolor
%\renewcommand{\textcolor}[2]{\oldtextcolor{black}{#2}}

\newcommand{\RPC}{{\mathrm{RPC}}}
\newcommand{\M}{{\mathfrak{M}}}
\newcommand{\X}{{\mathcal{X}}}
\newcommand{\low}{{\underline{P}}}
\newcommand{\tdt}{{\times\dots\times}}
\newcommand{\opi}{{[\![}}
\newcommand{\cli}{{]\!]}}
\newcommand{\Bel}{{\mathrm{Bel}}}
\newcommand{\Pl}{{\mathrm{Pl}}}
\newcommand{\Nec}{{\mathrm{Nec}}}
\newcommand{\AD}{{\mathrm{AD}}}
\newcommand{\SAD}{{\mathrm{SAD}}}


\DeclareMathOperator{\CDF}{cdf}
\tikzset{
    declare function={
        cdf_erf(\x,\m,\s)=1/(1 + exp(-0.07056*((\x-\m-3)/\s)^3 - 1.5976*(\x-\m-3)/\s));
    }
}
\DeclareMathOperator*{\argmin}{arg\,min} % thin space, limits underneath in displays
\DeclareMathOperator*{\mean}{mean}


%%%%%%%%%%%%%%%%% Defining the properties of the frames for theorems etc %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\mdfsetup{skipabove=\topskip, skipbelow=\topskip}  % Define Skips between the frames and text above and bellow

%% Code taken almost directly from https://ctan.mines-albi.fr/macros/latex/contrib/mdframed/mdframed-example-default.pdf
%% Theorem environment
\newcounter{theor}
\renewcommand{\thetheor}{\arabic{theor}}
\newenvironment{theorem}[1][]{%
 \refstepcounter{theor}%
  \ifstrempty{#1}%
  {\mdfsetup{%
    frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=blue!30!white]
        {\strut Theorem~\thetheor};}}
  }%
  {\mdfsetup{%
     frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=blue!30!white]
        {\strut Theorem~\thetheor:~#1};}}%
   }%
   \mdfsetup{innertopmargin=10pt,linecolor=blue!70!black,%
             linewidth=2pt,topline=true,
             frametitleaboveskip=\dimexpr-\ht\strutbox\relax,
             backgroundcolor=blue!10!white,%
             roundcorner=10pt,}
   \begin{mdframed}[]\relax%
   }{\end{mdframed}}
 
%% Definition environment
\newcounter{definition}
\renewcommand{\thedefinition}{\arabic{definition}}
\newenvironment{definition}[1][]{%
 \refstepcounter{definition}%
  \ifstrempty{#1}%
  {\mdfsetup{%
    frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=blue!20]
        {\strut Definition~\thedefinition};}}
  }%
  {\mdfsetup{%
     frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=blue!20]
        {\strut Definition~\thedefinition:~#1};}}%
   }%
   \mdfsetup{innertopmargin=10pt,linecolor=blue!20,%
             linewidth=2pt,topline=true,%
             frametitleaboveskip=\dimexpr-\ht\strutbox\relax,%
             backgroundcolor=blue!1!white,%
             roundcorner=5pt,}
   \begin{mdframed}[]\relax%
   }{\end{mdframed}}

%% Proposition environment
\newcounter{proposition}
\renewcommand{\theproposition}{\arabic{proposition}}
\newenvironment{proposition}[1][]{%
 \refstepcounter{proposition}%
 \mdfsetup{outerlinewidth=1,%
           roundcorner=10pt,%
           backgroundcolor=gray!5!white,%
           outerlinecolor=black,%
           innertopmargin=\topskip,%
           splittopskip=\topskip,%
           }
 \ifstrempty{#1}%
 {\begin{mdframed}[]\textbf{Proposition~\theproposition:~}\relax}%
 {\begin{mdframed}[]\textbf{Proposition~\theproposition:}~\textit{#1}\par\relax}%
 }{\end{mdframed}}


%% Example Environment
%\theoremstyle{definition}  % Boldface title, Roman body
%\newmdtheoremenv[roundcorner=5pt, font=\bfseries]{example}{Example}[section]
% OR
\newcounter{example}
\renewcommand{\theexample}{\arabic{example}}
\newenvironment{example}[1][]{%
 \refstepcounter{example}%
 \mdfsetup{roundcorner=5pt,}
 \ifstrempty{#1}%
 {\begin{mdframed}[]\textbf{Example~\theexample:~}\relax}%
 {\begin{mdframed}[]\textbf{Example~\theexample:}~\textit{#1}\par\relax}%
 }{\end{mdframed}}

% Remark Environment
\newenvironment{remark}{%
   \mdfsetup{hidealllines=true,%
             leftline=true,%
             linecolor=gray,%
             middlelinewidth=.2em,%
            }
   \begin{mdframed}[]\textbf{Remark:}\relax%
   }
   {\end{mdframed}}
   
   
% Redefines the proof environment
\renewenvironment{proof}{%
   \mdfsetup{hidealllines=true,%
             leftline=true,%
             linecolor=gray!50,%
             middlelinewidth=.2em,%
            }
   \begin{mdframed}[]\textit{\textbf{Proof:}}\relax%
   }
   {\qed\end{mdframed}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
   
   
% From CVPR cvpr.sty
\makeatletter
\DeclareRobustCommand\onedot{\futurelet\@let@token\@onedot}
\def\@onedot{\ifx\@let@token.\else.\null\fi\xspace}

\def\eg{\emph{e.g}\onedot} \def\Eg{\emph{E.g}\onedot}
\def\ie{\emph{i.e}\onedot} \def\Ie{\emph{I.e}\onedot}
\def\cf{\emph{cf}\onedot} \def\Cf{\emph{Cf}\onedot}
\def\etc{\emph{etc}\onedot} \def\vs{\emph{vs}\onedot}
\def\st{\emph{s.t}\onedot}
\def\wrt{w.r.t\onedot} \def\dof{d.o.f\onedot}
\def\iid{i.i.d\onedot} \def\wolog{w.l.o.g\onedot}
\def\etal{\emph{et al}\onedot}
\def\vs{\emph{vs}\onedot}

\def\blankpage{\newpage\null\thispagestyle{empty}\newpage}

\makeatother

%========================= Glossary ====================================

\input{Misc/acronyms_glossary}

\pdfstringdefDisableCommands{%
  \def\glspl#1{<#1>}} % To silence hyperref Warning Token not allowed in a PDF string (Unicode)
%=======================================================================
%=======================================================================

\begin{document}

    \definecolor{color}{HTML}{F5F5F5}
    \definecolor{ForestGreen}{HTML}{228B22}
    %======================= Page de Garde =================================
    \thispagestyle{empty}
    \setkeys{Gin}{draft=true}
    \include{Misc/title_page}
    
    %==================== Glossaire, TOC etc ===============================
    \tableofcontents
    \thispagestyle{empty}
    \pagebreak
    \glsaddall
    \pagenumbering{Alph}  % Switch Numerotation of pages to uppercase letters
    \setcounter{page}{0}  % Resetting the page number
    \printglossary[type=\acronymtype,nonumberlist]
    \printglossary[nonumberlist]
    \pagebreak
    
    %========================== Les choses sérieuses commencent ===========
    
    \pagenumbering{arabic}  % Switch numerotation of pages to Arabic
    %\doublespacing
    \onehalfspace
    
    \setkeys{Gin}{draft=true}
    \input{Chapters/0_intro}
    
    \setkeys{Gin}{draft=true}
    \input{Chapters/1_intro_to_stereo}
    
    \setkeys{Gin}{draft=true}
    \input{Chapters/2_mathematical_representation_of_uncertainty}
    
    \setkeys{Gin}{draft=true}
    \input{Chapters/3_joining_credal_sets_using_copulas}
    
    \setkeys{Gin}{draft=false}
    \input{Chapters/4_propragating_the_uncertainty_to_stereo_images}
    
    \setkeys{Gin}{draft=true}
    \input{Chapters/5_epistemic_uncertainty_in_stereo_matching}
    
    \setkeys{Gin}{draft=true}
    \input{Chapters/6_results}
    
    \setkeys{Gin}{draft=true}
    \input{Chapters/Conclusion}
    
    \singlespace
    \bibliography{thesis}

\end{document}
